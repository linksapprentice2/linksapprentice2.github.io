<html>


<div style="display:none;">
<img id="scream" width="50" height="50" src="https://linksapprentice2.github.io/chef_2177927.png">
</div>

<canvas id="myCanvas" width="800" height="600" style="border:1px solid #000; display:block; margin:0 auto;"></canvas>


<div class="button-container">
  <button class="top-button">Up</button>
  <div class="middle-row">
    <button class="left-button">Left</button>
    <!--<button>Center</button>-->
    <button class="right-button"s>Right</button>
  </div>
  <button class="bottom-button">Down</button>
</div>

<style>
@media screen and (min-width: 992px) {
#myCanvas{
  height:300px;
}
}



.button-container {
  display: flex;
  flex-direction: column; /* Stacks the rows of buttons */
  justify-content: center;
  align-items: center; /* Centers the columns within the container */
  height: 300px; /* Example height for centering */
  border: 1px solid #ccc; /* For visualization */
}

.top-button,
.bottom-button {
  width: 150px; /* Example width */
  height: 90px; /* Example height */
  margin: 5px;
}

.middle-row {
  display: flex;
  justify-content: center;
  align-items: center;
}

.middle-row button {
  width: 150px; /* Example width */
  height: 90px; /* Example height */
  margin: 5px;
}


</style>

<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

<script>



$(".top-button").on("click", function(){
  chef.y -= 5;
});
$(".bottom-button").on("click", function(){
  chef.y += 5;
});

$(".left-button").on("click", function(){
  chef.x -= 5;
});

$(".right-button").on("click", function(){
  chef.x += 5;
});


const canvas = document.getElementById('myCanvas');

canvas.addEventListener('touchstart', (e) => {
    e.preventDefault(); // Prevent default browser behavior (e.g., scrolling)
    isTouching = true;
    const touch = e.touches[0]; // Get the first touch point
    // touch.clientX, touch.clientY);
    // Start drawing or other press-related action

        const mouseX = touch.clientX - canvas.getBoundingClientRect().left;
        const mouseY = touch.clientY - canvas.getBoundingClientRect().top;

        // Store these coordinates as the target for the sprite
        targetX = mouseX;
        targetY = mouseY;
        let dx = targetX - chef.x;
        let dy = targetY - chef.y;
        let distance = Math.sqrt(dx * dx + dy * dy);
      if (distance > 0) { // Avoid division by zero if sprite is already at target
        let unitX = dx / distance;
        let unitY = dy / distance;
      }
       chef.x += unitX;
       chef.y += unitY;
});


const ctx = canvas.getContext('2d');

const image = document.getElementById("scream");

image.addEventListener("load", (e) => {
  ctx.drawImage(image, 10, 10, 80, 80);
});

let letters = [];

let chef = {

   x : canvas.width / 2,
   y :  canvas.height / 2,
   dx: 0,
   dy: 0
};

function generateLetters(){
     for (var i = 0; i<3; i++){
     let letter={
     rotationAngleRadians : Math.random() * 360 * Math.PI / 180,
     randomColor : generateRandomHexColor(),
     randomLetter : getRandomLetter(),
     x : getRandomIntInclusive(0, canvas.width+canvas.width*2),
     y : 0
    };
        letters.push(letter);
    }
}
  let interval = setInterval(() => {
      generateLetters();
    }, 1000);
/*
const letterOne={
     rotationAngleRadians : Math.random() * 360 * Math.PI / 180,
     randomColor : generateRandomHexColor(),
     randomLetter : getRandomLetter(),
     x : getRandomIntInclusive(0, canvas.width),
     y : 0
};

const letterTwo = {
     rotationAngleRadians : Math.random() * 360 * Math.PI / 180,
     randomColor : generateRandomHexColor(),
     randomLetter : getRandomLetter(),
     x : getRandomIntInclusive(0, canvas.width),
     y : 0
};

const letterThree = {
     rotationAngleRadians : Math.random() * 360 * Math.PI / 180,
     randomColor : generateRandomHexColor(),
     randomLetter : getRandomLetter(),
     x : getRandomIntInclusive(0, canvas.width),
     y : 0
};
*/

//const rotationAngleDegrees = Math.random() * 360; // Desired rotation in degrees
//const rotationAngleRadians = rotationAngleDegrees * Math.PI / 180;

//const randomColor = generateRandomHexColor();
//const randomLetter = getRandomLetter()

ctx.font = '96px serif'; // Sets font size and family
//ctx.fillStyle = randomColor; // Sets text color
ctx.textAlign = 'center'; // Aligns text horizontally
ctx.textBaseline = 'middle'; // Aligns text vertically

// let letterX = canvas.width;
// let letterY = 0;

// let letterTwoX = canvas.width - 100;
// let letterTwoY = 0;

// let letterThreeX = canvas.width
// let letterThreeY =100;

//let letters = [letterOne, letterTwo, letterThree];

let letterSpeedX= -1;
let letterSpeedY= 1;

function draw() {
    // Clear canvas
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    //ctx.clearRect(0, 0, canvas.width, canvas.height);

  ctx.drawImage(image, chef.x, chef.y, 80, 80);


    // Draw ball
    //ctx.fillRect(ballX - ballSize / 2, ballY - ballSize / 2, ballSize, ballSize);
    drawLetter();
    

    // Draw scores
    //ctx.font = '30px Arial';
    //ctx.fillText(player1Score, canvas.width / 4, 50);
    //ctx.fillText(player2Score, canvas.width * 3 / 4, 50);
}


function drawLetter(){


//const x = canvas.width/2;
//const y = canvas.height/2;

for (var i=0; i<letters.length; i++){

let x = letters[i].x;
let y = letters[i].y;

ctx.save();

ctx.fillStyle = letters[i].randomColor; // Sets text color

ctx.translate(x,y)
ctx.rotate(letters[i].rotationAngleRadians)

        let textMetrics = ctx.measureText(letters[i].randomLetter);
        let textWidth = textMetrics.width;
        let textHeight = parseInt(ctx.font); // A rough estimate for height

ctx.fillText(letters[i].randomLetter, -textWidth / 2, textHeight / 2); // Draws filled text in the center

ctx.restore();
}

}

function generateRandomHexColor() {
  const maxVal = 0xFFFFFF; // Represents the maximum possible hex value (16777215)
  let randomNumber = Math.floor(Math.random() * (maxVal + 1)); // Generate a random number between 0 and 16777215
  let hexColor = randomNumber.toString(16); // Convert to hexadecimal string
  hexColor = hexColor.padStart(6, '0'); // Pad with leading zeros if necessary to ensure 6 characters
  return `#${hexColor.toUpperCase()}`; // Prepend '#' and convert to uppercase
}

function getRandomLetter() {
  const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
  const randomIndex = Math.floor(Math.random() * characters.length);
  return characters.charAt(randomIndex);
}

function update(){
  for (var i = 0; i< letters.length; i++){
    letters[i].x += letterSpeedX;
    letters[i].y += letterSpeedY;
  }

        //if (letterX < 0) {
        //    letterX = canvas.width;
        //}
}

function getRandomIntInclusive(min, max) {
  min = Math.ceil(min); // Ensure minimum is an integer and rounds up
  max = Math.floor(max); // Ensure maximum is an integer and rounds down
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

/*
function resetLetter() {
    letterX = canvas.width;
    letterY = 0;
    letterSpeedX = -1; // Random initial direction
    letterSpeedY = 1;
}
*/

function gameLoop(){
  update();
  draw();
  requestAnimationFrame(gameLoop);
}

//resetLetter();
requestAnimationFrame(gameLoop);

</script>

</html>
